import greenfoot.*;

public class Musuh extends Actor {
    // Animasi
    private GreenfootImage[] idleFrames, hitAnimation;
    private int currentFrame = 0;
    private int animationTimer = 0;
    private final int ANIMATION_SPEED = 12;
    
    private int health = 100;

    public Musuh() {
        loadIdleAnimation();
        setImage(idleFrames[0]);
    }

    public void act() {
        animateIdle();
    }
    
    public void takeDamage(int damage) {
        health = health - damage;
        if (health <= 0) {
            die();
        }
    }
    
    private void die() {
        // Mungkin bisa ditambahkan suara atau animasi ledakan di sini sebelum dihapus
        // contoh: Greenfoot.playSound("explosion.wav");
        getWorld().removeObject(this); // Menghapus objek musuh dari world
    }

    private void loadIdleAnimation() {
        idleFrames = new GreenfootImage[4]; // Spritesheet ini punya 11 frame
        int frameWidth = 48; // Sesuaikan jika perlu
        int frameHeight = 32; // Sesuaikan jika perlu
        GreenfootImage spritesheet = new GreenfootImage("Idle-Sheet.png"); // Nama file musuh
        for (int i = 0; i < idleFrames.length; i++) {
            idleFrames[i] = new GreenfootImage(frameWidth, frameHeight);
            idleFrames[i].drawImage(spritesheet, -i * frameWidth, 0);
        }
    }
    
    private void hitAnimation(){
        hitAnimation = new GreenfootImage[4];
        int frameWidth = 48;
        int frameHeight = 32;
        GreenfootImage spritesheet = new GreenfootImage("Hit-Sheet.png");
        for (int i = 0; i < hitAnimation.length; i++){
            hitAnimation[i] = new GreenfootImage(frameWidth, frameHeight);
            hitAnimation[i].drawImage(spritesheet, -i * frameWidth, 0);
        }
    }

    private void animateIdle() {
    animationTimer++;
    if (animationTimer >= ANIMATION_SPEED) {
        animationTimer = 0;
        
        // Bergerak maju melalui frame
        if (currentFrame < idleFrames.length - 1) {
            currentFrame++;
        } 
        // Kembali ke frame pertama setelah mencapai akhir
        else {
            currentFrame = 0;
            // Beri jeda sebelum memulai lagi
            Greenfoot.delay(10);
        }
        
        setImage(idleFrames[currentFrame]);
    }
}
}
